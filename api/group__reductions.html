<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CnC: Asynchronous Reductions</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CnC
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Asynchronous Reductions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename Ctxt , typename ITag , typename IType , typename ITuner , typename CType , typename CTuner , typename OTag , typename OTuner , typename ReduceOp , typename Select &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">graph *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__reductions.html#ga700ef577820e594bfc11868817766965">make_reduce_graph</a> (<a class="el" href="class_cn_c_1_1context.html">CnC::context</a>&lt; Ctxt &gt; &amp;ctxt, const std::string &amp;name, <a class="el" href="class_cn_c_1_1item__collection.html">CnC::item_collection</a>&lt; ITag, IType, ITuner &gt; &amp;in, <a class="el" href="class_cn_c_1_1item__collection.html">CnC::item_collection</a>&lt; OTag, CType, CTuner &gt; &amp;cnt, <a class="el" href="class_cn_c_1_1item__collection.html">CnC::item_collection</a>&lt; OTag, IType, OTuner &gt; &amp;out, const ReduceOp &amp;op, const IType &amp;idty, const Select &amp;sel)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga700ef577820e594bfc11868817766965"></a><!-- doxytag: member="CnC::make_reduce_graph" ref="ga700ef577820e594bfc11868817766965" args="(CnC::context&lt; Ctxt &gt; &amp;ctxt, const std::string &amp;name, CnC::item_collection&lt; ITag, IType, ITuner &gt; &amp;in, CnC::item_collection&lt; OTag, CType, CTuner &gt; &amp;cnt, CnC::item_collection&lt; OTag, IType, OTuner &gt; &amp;out, const ReduceOp &amp;op, const IType &amp;idty, const Select &amp;sel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">graph* <a class="el" href="group__reductions.html#ga700ef577820e594bfc11868817766965">CnC::make_reduce_graph</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cn_c_1_1context.html">CnC::context</a>&lt; Ctxt &gt; &amp;&#160;</td>
          <td class="paramname"><em>ctxt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cn_c_1_1item__collection.html">CnC::item_collection</a>&lt; ITag, IType, ITuner &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cn_c_1_1item__collection.html">CnC::item_collection</a>&lt; OTag, CType, CTuner &gt; &amp;&#160;</td>
          <td class="paramname"><em>cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cn_c_1_1item__collection.html">CnC::item_collection</a>&lt; OTag, IType, OTuner &gt; &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ReduceOp &amp;&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IType &amp;&#160;</td>
          <td class="paramname"><em>idty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Select &amp;&#160;</td>
          <td class="paramname"><em>sel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a graph for asynchronous reductions.</p>
<p>Takes an input collection and reduces its content with a given operation and selection mechanism. The computation is done while new items arrive. Not all items need to be available to start or make progress. Data input is provided by normal puts into the input collection. The final reduced value for a reduction is put into the output collection.</p>
<p>Supports multiple concurrent reductions (with the same operation) identified by a reduction id. For this, a selector functor can be provided to tell which data-item goes to which reduction (maps a data-tag to a reduction-id).</p>
<p>The number reduced items per reduction-id needs to be provided through a second input collection. You can signal no more incoming values by putting a count &lt; 0. Providing counts late reduces communication and potentially improves performance.</p>
<p>Each reduction is independent of other reductions and can finish independently while others are still processing. Connected graphs can get the reduced values with a normal get-calls (using the desired reduction-id as the tag).</p>
<p>The implementation is virtually lock-free. On distributed memory the additional communication is also largely asynchronous.</p>
<p>See also <a class="el" href="reuse.html">Re-using CnC graphs (reductions, cross/join...)</a></p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctxt</td><td>the context to which the graph belongs </td></tr>
    <tr><td class="paramname">name</td><td>the name of this reduction graph instance </td></tr>
    <tr><td class="paramname">in</td><td>input collection, every item that's put here is applied to sel and potentially takes part in a reduction </td></tr>
    <tr><td class="paramname">cnt</td><td>input collection; number of items for each reduction expected to be put here (tag is reduction-id, value is count) </td></tr>
    <tr><td class="paramname">out</td><td>output collection, reduced results are put here with tags as returned by sel </td></tr>
    <tr><td class="paramname">op</td><td>the reduction operation:<br/>
 IType (*)(const IType&amp;, const IType&amp;) const<br/>
 usually a functor </td></tr>
    <tr><td class="paramname">idty</td><td>the identity/neutral element for the given operation </td></tr>
    <tr><td class="paramname">sel</td><td>functor, called once for every item put into "in":<br/>
 bool (*)( const ITag &amp; itag, OTag &amp; otag ) const<br/>
 must return true if given element should be used for a reduction, otherwise false;<br/>
 if true, it must set otag to the tag of the reduction it participates in </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="reduce_8h_source.html#l00095">95</a> of file <a class="el" href="reduce_8h_source.html">reduce.h</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> <span class="keyword">new</span> reduction&lt; ITag, IType, ITuner, CType, CTuner, OTag, OTuner, ReduceOp, Select &gt;( ctxt, name, in, cnt, out, op, idty, sel );
    }
</pre></div>
</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 6 2014 15:18:34 for CnC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
