<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CnC: Debugging features</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CnC
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Debugging features </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="tracing"></a>
Tracing</h2>
<p>As quite a lot is ongoing under <a class="el" href="namespace_cn_c.html" title="CnC API.">CnC</a> hood, you might sometimes be interested in what's actually happening. The C++ API provides a convenient interface to provide debugging output which describes what's happening. You can control what parts to see and which to be quiet about.</p>
<p>You need to include </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;cnc/cnc_debug.h&gt;</span>
</pre></div><p> which declares the debugging interface. Debug output can be retrieved for steps, tag-collections and item-collections by calling <a class="el" href="struct_cn_c_1_1debug.html#a037ca57a050741fda23a61a18cac27b3" title="enable tracing of a given tag collection at a given level">CnC::debug::trace</a> with the respective collections. To trace our Fibonacci step and the item-collection you could issue the respective calls within the constructor of the context or just after creating the context:  <div class="fragment"><pre class="fragment">    <span class="comment">// enable debug output for steps</span>
    <a class="code" href="struct_cn_c_1_1debug.html#a037ca57a050741fda23a61a18cac27b3" title="enable tracing of a given tag collection at a given level">CnC::debug::trace</a>( ctxt.m_steps );
    <span class="comment">// also enable debug output for our items</span>
    <a class="code" href="struct_cn_c_1_1debug.html#a037ca57a050741fda23a61a18cac27b3" title="enable tracing of a given tag collection at a given level">CnC::debug::trace</a>( ctxt.m_fibs );
</pre></div></p>
<p>when running the program you will see a trace event for every step invocation and for every put/get of items. The trace includes annotations about the successful or unsuccessful completion of the traced operations.</p>
<p>If your application uses more than one step-, tag- or item-collection it will be hard to determine to which collection instance individual entries of the default trace belong. To create a more meaningful trace you can assign names to the individual collections. For this their constructor accepts and optional string argument:  <div class="fragment"><pre class="fragment">    fib_context()
        : <a class="code" href="class_cn_c_1_1context.html" title="CnC context bringing together collections (for steps, items and tags).">CnC::context&lt; fib_context &gt;</a>(),
          <span class="comment">// Initialize each step collection</span>
          m_steps( *<span class="keyword">this</span>, <span class="stringliteral">&quot;fib_step&quot;</span> ),
          <span class="comment">// Initialize each tag collection</span>
          m_fibs( *<span class="keyword">this</span>, <span class="stringliteral">&quot;fibs&quot;</span> ),
          <span class="comment">// Initialize each item collection</span>
          m_tags( *<span class="keyword">this</span>, <span class="stringliteral">&quot;tags&quot;</span> )
</pre></div></p>
<p>Here is the full example code: <a class="el" href="samples.html#fib_trace_h">samples/fib/fib_trace/fib.h</a> and <a class="el" href="samples.html#fib_trace_code">samples/fib/fib_trace/fib_trace.cpp</a></p>
<h2><a class="anchor" id="stats"></a>
Scheduling Statistics</h2>
<p>Another interesting feature provides statistics about the internal scheduler. Depending on the availability of dependent items, a step might have been executed to early and needs being replayed when the missing item becomes available. The respective information can be printed when the context is destroyed (in our example when the program terminates). All you need to do is enabling this feature using <a class="el" href="struct_cn_c_1_1debug.html#af8de6416eab708937bbd263a4a17719a" title="enable collection scheduler statistics per context">CnC::debug::collect_scheduler_statistics</a>:  <div class="fragment"><pre class="fragment">    <a class="code" href="struct_cn_c_1_1debug.html#af8de6416eab708937bbd263a4a17719a" title="enable collection scheduler statistics per context">CnC::debug::collect_scheduler_statistics</a>( ctxt );
</pre></div></p>
<p>In the example <a class="el" href="samples.html#fib_stats_code">samples/fib/fib_stats/fib_stats.cpp</a> we have not placed it into the context's constructor (<a class="el" href="samples.html#fib_stats_h">samples/fib/fib_stats/fib.h</a>), but we could have done so. Of course, it is possible to enable tracing and statistics gathering concurrently.</p>
<p>Next: <a class="el" href="tuning.html">The Tuners</a> </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 6 2014 15:18:33 for CnC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
