<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CnC: Runtime Options</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CnC
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Runtime Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="num_threads"></a>
Number of Threads</h2>
<p>The API allows adjusting the number of worker threads in the code: see <a class="el" href="struct_cn_c_1_1debug.html#aa75845379b8e5217c72675c4ad84174d" title="sets the number of threads used by the application">CnC::debug::set_num_threads</a>. You can also set the number of threads at runtime by setting the environment variable CNC_NUM_THREADS to the desired number of threads. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The given number must include the environment thread, e.g. n-1 worker threads will be created if CNC_NUM_THREADS is set to n. </dd>
<dd>
Depending on the scheduling strategy, the runtime might actually spawn one or more extra internal helper threads. These threads will mostly be idle and should not have any significant effect on the other threads.</dd></dl>
<h2><a class="anchor" id="scheduler"></a>
Scheduler</h2>
<p>The <a class="el" href="namespace_cn_c.html" title="CnC API.">CnC</a> runtime comes with a selection of different scheduling strategies from which you can chose at runtime. At start-up time, the runtime selects the scheduler upon the evaluation of the environment variable CNC_SCHEDULER. Allowable values are</p>
<ul>
<li>TBB_TASK uses the TBB task-stealing scheduler (default)</li>
<li>FIFO_SINGLE uses a single FIFO task-queue</li>
<li>FIFO_STEAL implements task-stealing on thread-local FIFO task-queues</li>
<li>FIFO_AFFINITY is the same as FIFO_STEAL but additionally evaluates step_er::affinity()</li>
</ul>
<dl class="note"><dt><b>Note:</b></dt><dd>: tuner::affinity() is only evaluated by FIFO_AFFINITY. If your tuner provides affinity hints, you need to use FIFO_AFFINITY to actually make use of it.</dd></dl>
<p>The default scheduler is TBB_TASK. Depending on your application characteristics you might observe significant performance variations with different schedulers. Our experience is that in many cases either TBB_TASK or TBB_FIFO shows best (or best-equivalent) performance.</p>
<h3><a class="anchor" id="priorpin"></a>
Scheduler Control</h3>
<p>The <a class="el" href="namespace_cn_c.html" title="CnC API.">CnC</a> runtime reacts on a few more flags that can be controlled through environment variables:</p>
<ul>
<li>CNC_USE_PRIORITY: by default, the step_tuner::priority() hint is not evaluated. The FIFO schedulers (but not TBB_TASK) will evaluate step_tuner::priority() if CNC_USE_PRIORITY is set to 1</li>
<li>CNC_PIN_THREADS: The runtime can pin threads to the available cores. The value specified in CNC_PIN_THREADS will be used as the stride to distribute threads in a strided round-robin fashion. This allows adjusting the thread-to-core mapping to the HW hierarchy (sockets, caches etc). Examples for 8 cores (c0-c7) CNC_PIN_THREADS=1: t0-&gt;c0, t1-&gt;c1, t2-&gt;c2, t3-&gt;c3, ... CNC_PIN_THREADS=2: t0-&gt;c0, t1-&gt;c2, t2-&gt;c4, t3-&gt;c6, t4-&gt;c1, t5-&gt;c3, t6-&gt;c5, t7-&gt;c7, t8-&gt;c0, ... CNC_PIN_THREADS=4: t0-&gt;c0, t1-&gt;c4, t2-&gt;c1, t3-&gt;c5, t4-&gt;c2, t5-&gt;c6, t6-&gt;c3, t7-&gt;c7, t8-&gt;c0, ...<br/>
 By default, pinning is off. <dl class="note"><dt><b>Note:</b></dt><dd>On Intel(R) Xeon Phi(TM) (MIC) pinning is on by default with stride 4.</dd></dl>
</li>
</ul>
<h3><a class="anchor" id="bypass"></a>
Bypassing the Scheduler</h3>
<p>The <a class="el" href="namespace_cn_c.html" title="CnC API.">CnC</a> runtime can optionally execute the first step-instance that is created by the current step (e.g. by putting a tag) right after the currently executing step. This successor step-instance will not go through the normal scheduling procedure and thus avoids overhead. The trade-off is that it can also limit parallelism. Hence this feature is disabled by default. To enable it set CNC_SCHEDULER_BYPASS to a number which is unequal to 0.</p>
<p>Next: <a class="el" href="distcnc.html">Running CnC applications on distributed memory</a> </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 6 2014 15:18:33 for CnC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
